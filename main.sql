/* DROP TABLE */
DROP TABLE BOARD_SCHEDULE_DETAIL;
DROP TABLE SCHEDULE_DETAIL;
DROP TABLE SCHEDULE;
DROP TABLE TRIP_PLACE;
DROP TABLE MEMBER_TRIP;
DROP TABLE TRIP;
DROP TABLE CITY;
DROP TABLE CONTINENT;
DROP TABLE REPLY;
DROP TABLE BOARD;
DROP TABLE MESSAGE;
DROP TABLE MEMBER;
DROP TABLE GRADE;


/* CREATE TABLE */

CREATE TABLE GRADE(
 GRADE VARCHAR2(10) PRIMARY KEY,
 GRADE_IMG VARCHAR2(100)
);

CREATE TABLE MEMBER(
MEMBER_NO NUMBER GENERATED BY DEFAULT AS IDENTITY START WITH 1000 PRIMARY KEY,
MEMBER_ID VARCHAR2(20)UNIQUE,
MEMBER_PW VARCHAR2(20) NOT NULL,
MEMBER_NAME VARCHAR2(30),
MEMBER_NICKNAME VARCHAR2(20) UNIQUE,
MEMBER_EMAIL VARCHAR2(30) UNIQUE NOT NULL,
MEMBER_BIRTH DATE,
MEMBER_GENDER VARCHAR2(2),
MEMBER_ENROLL DATE,
MEMBER_PHONE VARCHAR2(20) UNIQUE,
MEMBER_TYPE VARCHAR2(30),
MEMBER_IMG VARCHAR2(100),
MEMBER_GRADE VARCHAR2(10),
MANAGER_YN VARCHAR2(2),

FOREIGN KEY(MEMBER_GRADE)REFERENCES GRADE(GRADE),
CONSTRAINT MANAGER_YN CHECK (MANAGER_YN ='Y' OR  MANAGER_YN ='N')
);
CREATE TABLE MESSAGE(
 MESSAGE_NO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
 /*08070935 불필요한 참조, 속성 제거*/
 MESSAGE_CONTENT VARCHAR2(1000),
 MESSAGE_SEN NUMBER,
 MESSAGE_REV NUMBER,
 SEND_DATE DATE,
 MESSAGE_STATUS_YN VARCHAR2(2),
 
  

CONSTRAINT MESSAGE_STATUS_YN CHECK (MESSAGE_STATUS_YN ='Y' OR  MESSAGE_STATUS_YN ='N')
);
CREATE TABLE CONTINENT(
 CONTINENT_CODE VARCHAR2(10) PRIMARY KEY,
 CONTINENT_NAME VARCHAR2(20)
);
CREATE TABLE BOARD(
BOARD_NO NUMBER GENERATED BY DEFAULT AS IDENTITY START WITH 1000 PRIMARY KEY, 
MEMBER_NO NUMBER,
BOARD_TYPE VARCHAR(30),
CREATE_DATE DATE,
BOARD_TITLE VARCHAR2(100),
BOARD_CONTENT VARCHAR2(2000),
BOARD_IMG VARCHAR2(200),
BOARD_HIT NUMBER,
BOARD_LIKE NUMBER,
BOARD_KIND NUMBER,
BOARD_STATUS VARCHAR2(20),
/*08070939 대륙분류를 위한 BOARD_CONTINENT 추가*/
BOARD_CONTINENT VARCHAR2(10), 

FOREIGN KEY (MEMBER_NO) REFERENCES MEMBER(MEMBER_NO),
/*08070939 대륙분류를 위한 BOARD_CONTINENT 추가*/
FOREIGN KEY (BOARD_CONTINENT) REFERENCES CONTINENT(CONTINENT_CODE)
);
CREATE TABLE REPLY(
REPLY_NO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
REREPLY_NO NUMBER,
BOARD_NO NUMBER,
MEMBER_NO NUMBER,
REPLY_CONTENT VARCHAR2(1000),
REPLY_STATUS_YN VARCHAR2(2) ,
REPLY_DATE DATE,

FOREIGN KEY (BOARD_NO) REFERENCES BOARD(BOARD_NO)
);

CREATE TABLE CITY(
CITY_NO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
CONTINENT_CODE VARCHAR2(10),
CITY_NAME VARCHAR2(50),
CITY_IMG VARCHAR2(200),

FOREIGN KEY(CONTINENT_CODE) REFERENCES CONTINENT(CONTINENT_CODE)

);
CREATE TABLE TRIP(
TRIP_NO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
CONTINENT_CODE VARCHAR2(10),
TRIP_TITLE VARCHAR2(100),
TRIP_START DATE,
TRIP_END DATE,

FOREIGN KEY(CONTINENT_CODE) REFERENCES CONTINENT(CONTINENT_CODE)
);
CREATE TABLE MEMBER_TRIP(
MEMBER_NO NUMBER,
TRIP_NO NUMBER,

FOREIGN KEY (MEMBER_NO) REFERENCES MEMBER(MEMBER_NO),
FOREIGN KEY (TRIP_NO) REFERENCES TRIP(TRIP_NO)
);
CREATE TABLE TRIP_PLACE(
PLACE_NO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
CITY_NO NUMBER,
PLACE_NAME VARCHAR2(50),

FOREIGN KEY(CITY_NO) REFERENCES CITY(CITY_NO)
);
CREATE TABLE SCHEDULE(
 SCHEDULE_NO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
 TRIP_NO NUMBER,
 CITY_NO NUMBER,
 SCHEDULE_DATE DATE,
 SCHEDULE_START DATE,
 SCHEDULE_END DATE,
 
 FOREIGN KEY (TRIP_NO) REFERENCES TRIP(TRIP_NO),
 FOREIGN KEY(CITY_NO) REFERENCES CITY(CITY_NO)
);
CREATE TABLE SCHEDULE_DETAIL(
DETAIL_NO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
SCHEDULE_NO NUMBER,
PLACE_NO NUMBER,
DETAIL_CONTENT VARCHAR2(3000),
DETAIL_DATE DATE,

FOREIGN KEY(SCHEDULE_NO) REFERENCES SCHEDULE(SCHEDULE_NO),
FOREIGN KEY(PLACE_NO) REFERENCES TRIP_PLACE(PLACE_NO)

);
CREATE TABLE BOARD_SCHEDULE_DETAIL(
BOARD_NO NUMBER,
DETAIL_NO NUMBER,

FOREIGN KEY(BOARD_NO) REFERENCES BOARD(BOARD_NO),
FOREIGN KEY(DETAIL_NO) REFERENCES SCHEDULE_DETAIL(DETAIL_NO)
);


commit;